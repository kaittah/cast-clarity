podcast_transcript = """
 This episode is brought to you by Bumble. Bumble believes that what's truly sexy is an act of kindness. Isn't that just true? Playing hard to get, having a too cool type of attitude, not hot, opening the door for someone, giving someone a shoulder to cry on, that's hot. But sometimes kindness can be as simple as just a compliment. And that's why Bumble launched their new compliments feature. So now when someone's profile catches your eye, you can let them know with a compliment. Try it for yourself and download Bumble today. A science story, huh? I don't know why you're a scientist. It felt so strange. And I just thought, well, it was that golden moment. Because science was on my side. Hey, everyone. Welcome to the Story Clutter, where true personal stories about science help us to discover how weird and wonderful it is to exist in this world and be a human. I'm your host, Misha Gajewski, and this week we're getting personal with burnout. We've all heard that term a lot these days, but it's more than just a buzzword used for a catchy headline. In this week's stories, we get to see how people experience the world. And we're going to talk about how science can help us to be more comfortable In this week's stories, we get to see how people experience it firsthand. Our first story is from Erika Martinez. Erika Martinez is a physician finishing her last year of a three-year residency training in pediatric medicine. She also enjoys knitting tiny baby hats in her spare time. We recorded her story at our go-to Seattle spot, Jewel Box Theater. Her story is all about the struggle of keeping your empathy and humanity when the pressures of work become overwhelming. Something I think we can all kind of relate to on some level, even if we don't work in healthcare. I also just want to quickly note that given the sensitive nature of medical information privacy, the names, ages, and identifiable details in Erika's stories were changed to protect patient privacy. Here's Erika. When I was in medical school, our Dean of Students, Dr. Radloff, gave us a lecture series on empathy. We discussed what it is, what it looks like, and why it's important for doctors to have it. It was clear from her tone that good doctors have empathy. And at the time, it seemed really obvious. Of course, good doctors have empathy. But since graduating medical school and starting off my career in pediatrics, that obvious thing has been one of the things that I have struggled with the most. Three years after those lectures, I'm about halfway through my pediatrics residency, and I'm starting a busy rotation through an intensive care unit, a pediatrics intensive care unit. On my first day, all I can see are doors. And each door contains a family with a kid who's sicker than they have ever been before. All of these doors face our small office in the center, made of floor-to-ceiling glass walls. We look like a tropical fish tank in a waiting room, with the fish darting around back and forth, swimming in circles, while the onlookers are just trying to get better. It's incredibly busy. I'm putting in orders as I'm answering phone calls, as I'm calling consultants, and I'm talking to families, and I barely have a second to think. The phones are ringing nonstop. And every time I answer, there's a beeping in the background that indicates there's another person waiting for me to hang up to give me more things to do. Our to-do lists are getting longer, faster than we can cross things off. And everything happens stat in an ICU. But I'm picking up so many phone calls that I can't actually do the things that everybody wants me to do. I'm exhausted, I'm overwhelmed, and I'm stressed. In room 518 is a 16-year-old girl named Brianna, who has cancer, osteosarcoma in her right leg. She's coming to us after a 26-hour-long surgery, where they remove the middle of her leg and reattach her ankle and her foot backwards to make a new cancer-free knee joint. She has an excellent prognosis as soon as she recovers from this procedure. But it's gonna take months, if not years, for her to walk again, and even that with the help of prosthetics. The procedure was long, and she had several complications. And so she's coming to us with a lot of anesthesia on board, and she has her breathing tube still in place. We make a plan as a team to let her wake up slowly and then take the breathing tube out so it can be stundly safely. I'm the only resident on overnight, and while I have supervising doctors, they have infinitely more things to do than me. So when Brianna starts to wake up with her breathing tube still in place, I'm the only one who's immediately available to help her. By her side, I see her alternating between awake and anxious and breathing through a straw that is her breathing tube. But then she'll fall back asleep, and the machine will take over breathing. There's so many sedatives on board that if we take that tube out now, she's more than likely to stop breathing. And the reality is it's just not time to do it right now. I can feel the situation escalating, and she's upset, and her mom's upset, and I reach out in a kindness, trying to be caring, and I tell her, wow, Brianna, I love your earrings. Wrong choice. Her mom looks at me with hatred in her eyes as she tells me, get out of this room. You can watch from outside. And as I leave, my heart is pounding, and my legs are shaking, and as I look back in through the window, I see her and I see myself the way her mother sees me, a bad doctor, a bad person, the kind of person that her daughter needs to be protected from. And even after she goes home, fully recovered from her procedure, it still makes my heart pound to walk past room 518. Just down the hall in room 514 is a young mother who brought in her three-year-old son from Mexico to, with a desperate attempt to cure him with the best medical help. He has a large aggressive abdominal tumor called rhabdomyosocoma, and the tumor is taking up most of his belly. His skin is stretched so tight across his belly that it's literally splitting down the middle, and his lungs have no room to inhale. They're being squished from below. Alex was already assigned to a different resident when we arrived, but when we heard about his case, that resident asked me if I could take over for her. She told me, I can't look at my son and not see him, and I can't look at him and not see my son. So Alex becomes my patient. It's hard to go in his room. The air is heavy and humid with suffering. Alex's stomach is losing the battle for space with his tumor, and he doesn't eat much. So as the tumor grows, the rest of him wastes away. But Alex loves bread. He asks for it all the time. He nibbles on it throughout the day, and when he goes to bed, in his tiny hands are two pieces of bread that he clutches like a security blanket. Alex's case is tragic, and it's sad, and with the best doctors and the best medical care, we cannot hear him of his cancer. But in his room, I also find light and inspiration. Near the end of his life, we ask special permission from the hospital to take him up to the roof so he can breathe fresh air. And as I'm up there with Alex and his mother, I'm surprised by how at peace I feel. Even though he has the saddest case that I have ever heard, it feels easy to feel sad with Alex and his mother because sadness and sharing that space is all we have to offer. Two rooms over from Alex's, in rooms 512, is a 16-year-old boy named Garrett who had fought with his parents. After the argument, he went to his grandfather's medicine cabinet and took handfuls of whatever he could find, and he washed it all down with a half a bottle of Windex. Now, by the time he was found, he was unconscious, and he was flown over by helicopter. By the time he got to us, he was intubated with a machine breathing for him. But he recovered quickly, and he was doing really well. So it was overall a really hopeful case. Now, his mother had been at work when he was found, and she had driven over all night to get to us from out of state. She was frantic and angry and stressed and scared, but we had a wonderful conversation in the morning about the plan for the day. We're gonna talk to poison control, and we're gonna call the gastroenterologist who can use a camera to look in his throat and see what damage the Windex has done. A couple hours later, I'm on rounds with the whole team, and I'm getting ready to present his case, and I'm outside his room, and I stand up, and I say, in room 512, there were no acute overnight events. And in that moment, Garrett sits up out of his coma, takes a deep breath, and projectile vomits blood all over the room. I was so shocked. The best I could do was just pause and say, well, I guess there is now an acute overnight event. Before I rushed into the room to see what was going on, Garrett's mother was furious, and she moved around the bed with superhuman speed to get in my face and yell, you said you would call the gastroenterologist. Why haven't you called him? And I know that a caustic substance like Windex can take time for the damage to develop. And if you look too early, you can convince yourself that there's no damage, only for it to have to have it develop later. And that knowledge is making me calm and reassured. But I can see the fear in Garrett's mom's eyes, and it tells me that she knows her son is dying, even though I know he's not. And I can understand her pain and her frustration. It looks like we aren't doing anything to help her son. But in that moment, all I can think of is how hard it is to show empathy to this woman who's screaming at me. When two rooms over, it was so easy to share that space and that sadness with Alex and his mother. And I feel this cold, heartless exhaustion bubble up through my chest. I realize that it is so much more complicated than good doctors have empathy. And when I really feel the pain of every family in the ICU, it can make it very hard for me to do my job. Now, there's no doubt that I'm meeting all of these mothers on the worst days of their lives, at the bottom of their own personal pit. And it can feel like to have empathy is to climb down into that pit with them and breathe in that pain. And on a good day, rested and refreshed, it's easy for me to climb down into pit after pit after pit. But there are days when those holes are just too numerous or too deep. And there are days when the pressure of all of it gets so much that it feels like this thin wall of glass that protects me from all of the awful things that I see every day can crack or shatter. Every family in the ICU is having the worst day of their lives. And for the most part, they get better and they go home and they are replaced by new families having the worst days of their lives. And I am there every day. And it can be exhausting to live every day of my life in those dark places. There are days when it is hard to have empathy. And that does not make me a bad doctor. Thank you. Applause. Music. That was Erika. To find out more about Erika, visit our website, storycollider.org. Being a storyteller on our stage is a great way to share your story with others. And I hope that you have a great day. And I'll see you next time. Story Collider is just one way to make Story Collider happen. But we know it's not for everyone. Maybe becoming a Story Collider donor is more your speed. Story Collider donors play an increasingly important role in our ability to bring you this podcast. We're in this together. Story Collider is one big experiment that's designed to connect us around our love of discovery, curiosity, and the natural world. If you believe in the power these stories have and this mission, please consider donating to the Story Collider at storycollider.org slash donate. The most popular level is $10 a month, and you can make your tax-deductible donation at storycollider.org slash donate. But really, any level makes a difference, and we're so grateful to everyone who supports Story Collider. This episode is brought to you by Bumble. Bumble believes that what's truly sexy is an act of kindness. Isn't that just true? Playing hard to get, having a too cool type of attitude, not hot, opening the door for someone, giving someone a shoulder to cry on, that's hot. But sometimes kindness can be as simple as just a compliment, and that's why Bumble launched their new compliments feature. So now when someone's profile catches your eye, you can let them know with a compliment. Try it for yourself and download Bumble today. Between the kids being home and hosting, everything in our house gets used up in summer. With Instacart, I can save money by stocking up on all my favorite summer brands. I save time by getting everything delivered in as fast as an hour. And I save myself a sink full of dirty dishes by stocking up on paper plates for the annual summer cookout. Save more on summer essentials? Spend more time enjoying summer. Add summer to cart. Download the app to get free delivery on your first three orders. Offer valid for a limited time. Minimum $10 per order. Additional terms apply. Our next story is from Karen Glover. Karen is currently an assistant professor of psychiatry at the Albert Einstein College of Medicine, where she teaches psychopharmacology and psychotherapy to psychiatry and family medicine residents. Her story beautifully captures the frustration and mental exhaustion that happens when your work is overwhelming and you feel powerless. It was recorded at Caveat in New York City. Here's Karen. I was driving into the desert of Namibia for about two hours before I realized that I was crying. How did I get there? I'm black, and I am the descendant of people who were trafficked, tortured, and abused. I was a black woman. I was a black woman. I was a black woman. I am the granddaughter of someone who saw his cousin lynched in South Carolina when he was a teen. And he basically recognized that if you wake up and go to bed every day in a black dress, you're going to be a black woman. And he was a black woman. And he was a black woman. And he was a black woman. And he was a black woman. And he recognized that if you wake up and go to bed every day in a black body, you're not safe, and that's no way to live. So he and my grandmother, with their third grade education, moved to Harlem like millions of other black people from the South and basically looked for a better life. What they didn't count on was another kind of heartbreak and trauma, and so I was witnessing three of their five children succumb to the opioid epidemic in the 60s and 70s. And so I was raised witnessing the suffering of my cousins, who I loved and wanted to protect, but found myself powerless repeatedly. And so I went on to embrace a career where I get to sort of reach into people's lives and fix what's wrong, help them be better parents or better children or better aunts and uncles and community members. So I went to work in the South Bronx, where essentially it's the lowest income congressional district in the United States, and I had patients who came to me with any number of issues, trauma, depression. One patient, I'll call her Cheyenne, came to me with a complaint of depression, except the more we talked, the more it became clear that her depression was linked to crack use. So she would come to me and very acutely dysphoric, as we would say, just very down, and I would have to say, when was the last time you used? And she would say, that was, I don't, nobody's using. And I would say, ah, look, I got your urine tox right here. There's nothing in the urine that shows up as cocaine except cocaine. And she would say, no, nobody's using coke. Like, no, you got it all wrong. And we would go back and forth, and I would have to like hold firm and also, you know, sometimes have a sense of humor and just go back and forth with her, like, what could it possibly be? Like, what do you think? And she would just go, no, no, no, no, no. And then finally she would go, I know. And I would go, okay, so what do you want to do with that? Right? And so she would essentially argue back, and at some point she decided to go to rehab. She was a mother of four, and she started to turn her life around. See, she was the descendant of black people who had left the South looking for safety, looking for a better life, kind of like my folks. And she was raised by a parent who was addicted to alcohol. And she knew when she was about 14 or 15 that home wasn't safe, so she went to live in the street. And so she hustled, and she made a way for herself. She had sex for money, sex for safety, sex for drugs. Her own father introduced her to cocaine and crack when she was 16. She made a way for herself. In the process, she contracted HIV, and she still pressed on and became an activist and struggled with substance use. And so there was always a level of respect that I had to have for her. I mean, I have for all of my patients, but in light of her almost nakedness, her willingness to show up repeatedly, I had to keep on honoring that and keep on working with her, even though sometimes she would show up agitated and angry and irrational. And we worked together. And she went to rehab and then came back and brought her son with her, her youngest child, an 11-year-old, with sort of the same broad smile as she had and the same very sensitive eyes as she has. And so we got to know each other a little bit, and I got to know her family. And so there we were, kind of working together, and she really got to a point where she wanted to reconcile some things from her past, and she went to visit her father. And right around that time, I was starting to feel kind of burnt out, starting to feel like my work was having limited usefulness for the population that I was working with, because societal forces seemed to constantly be dragging them down. Just when they would start to get their lives together, their housing would... Literally, the ceiling would crash in, and they would have unsafe housing where there's asbestos in the air, and their neighborhoods were unsafe. They were being unfairly policed in ways that constantly had them in and out of the carceral system. And so I just constantly felt overwhelmed and like I was powerless like when I was a kid. That's not what I went into medicine for, right? So a certain cynicism had come over me, a certain... I knew I needed to get away. So I booked a trip to Southern Africa. A friend of a friend of a friend was getting married. I didn't know them. I was like, I'll just be there. So there I was, buying my ticket to Southern Africa. And so just before my trip to Johannesburg, I got a phone call from Cheyenne, and she called and said, look, I'm on the Amtrak. I'm on my way to New York. I'm going to see you tomorrow. I talked with my father, and we need to talk about what happened. She said, sure. I get to work the next morning, kind of bopping into clinic, and my staff said, you know, did you hear what happened to Cheyenne? And I said, no, but I'm going to see her later. And they said, no. No, she died. And so I just kind of froze, you know, because I was already like teetering, right? And I just knew I wasn't going to be the same. And so I couldn't even go to her funeral because I had to get on a plane because I was going on this trip to relieve myself of my burnout. And found myself driving into the desert in Namibia following the glow of the brake lights of my friend Don, who was driving the truck in front of me, completely disoriented, driving on the left side of the road as they do there, driving a stick shift and just feeling really out of sorts. And suddenly the brake lights went super bright, and I realized I was about to hit Don's car, his truck, and stopped suddenly and wiped my tears and got out of the truck and realized we had to stop because we were actually surrounded by a bunch of animals, zebras. And it was astounding. And so we looked up, and our crew of friends, about seven of us, just sort of stood there like, what is this? And looked up and the Milky Way galaxy was right above our heads, just above our heads, right? And it felt like we were in space. And in that moment I kind of recognized that the same Milky Way that was over us was the same Milky Way that was over our ancestors and made me realize that forces way powerful than I were constantly at work. And I was doing my part, but also maybe I didn't have to because some of this struggle will go on and so will the world continue to spin, right? So I took a break from medicine, from direct clinical care, and I went back part-time eventually, and that turned out to be good, except four years later there came COVID and my patients started dying, and some of my colleagues, and some loved ones, and I started to have that extremely powerless feeling again and felt overwhelmed and cynical and frustrated by what our leaders were doing and saying and the reactions of people in and around healthcare and then in our system because right around that time George Floyd and Breonna Taylor's killings were quite prominent and traumatizing. And so I knew that I just needed a break again, and so I participated in a community talk around vaccine hesitancy and medical racism and sort of thinking in my mind like I cannot wait till I just get to take a break because I just don't know that I'm having an impact anymore. I was on a panel discussion talking about medical racism and the legacy of experimentation and exploitation on people of color in medical systems, and my co-panelist had this really broad smile and these very sensitive eyes. He was about 18 years old and he was an activist, and he bore a striking resemblance to my patient, and I looked at his name and I realized that he was her son that she used to bring to me for visits when she was sober. And so I realized that sometimes we in healthcare don't get to have quite the impact that we want on our patients and our patients' lives, that there are forces that are so much bigger than us that seem to have a greater impact, but I think I just want all of us to know that sometimes the impact you hope that you're having on your patient and realize you're not having, you are actually having on the generation they gave birth to. Thank you. Applause. That was Karen. You can find out more about Karen or read the transcript to her story on our website. Our website is just one way to connect with Story Collider, but there are so many other ways, and we hope you'll use all of them. You can always follow us on social media. We're on Facebook, Twitter, Instagram, and TikTok. Head to storycollider.org to become a financial supporter. Or if you want to tell a story on our stage right now, we're looking for astronomy stories for a special upcoming show in St. Louis. Submit your pitch at storycollider.org slash submissions before August 15th. The Story Collider is very grateful for the support of Science Sandbox, a Simon's Foundation initiative dedicating to engaging everyone with the process of science. This podcast is produced by me, Miesha Gajewski, along with Nikesha Roberts-Washington, Jun Chen, and Erin Barker, executive director and co-founder of the Story Collider. The stories featured in today's episode were from shows produced by Kent Whipple, Juan Carlos Martinez Jr., Christine Gentry, and Paula Croxton. Special thanks goes out to Story Collider's board and staff, including Anne-Marie Lonsdale, Edith Gonzalez, and Lindsay Cooper. Our theme music is by Ghost, and next week I'll be back with stories about the wild things we do when looking for a job. Until next time, thanks so much for listening.
"""

def get_podcast_summary(podcast_transcript):
  import openai
  openai.api_key = "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"
  import tiktoken
  instructPrompt = """
  Below the #### is a podcast transcript. Write an outline of the podcast episode.
Make sure to include roman numerals to indicate sections, and newline characters so that it can be easily printed.
  ####
  """

  enc = tiktoken.encoding_for_model("gpt-3.5-turbo")
  n_tokens_podcast = len(enc.encode(podcast_transcript))
  n_tokens_prompt = len(enc.encode(instructPrompt))
  max_tokens = 4096
  if n_tokens_podcast + n_tokens_prompt > max_tokens:
    podcast_transcript = enc.decode(enc.encode(podcast_transcript)[:max_tokens - n_tokens_prompt])

  request = instructPrompt + podcast_transcript

  chatOutput = openai.ChatCompletion.create(model="gpt-3.5-turbo-16k",
                                              messages=[{"role": "system", "content": "You are a helpful assistant."},
                                                        {"role": "user", "content": request}
                                                        ]
                                              )

  podcastSummary = chatOutput.choices[0].message.content
  return podcastSummary

def get_podcast_guest(podcast_transcript):
  import openai
  import wikipedia
  import json
  import tiktoken
  openai.api_key = "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"

  enc = tiktoken.encoding_for_model("gpt-3.5-turbo")
  n_tokens_podcast = len(enc.encode(podcast_transcript))
  max_tokens = 3900
  if n_tokens_podcast > max_tokens:
    podcast_transcript = enc.decode(enc.encode(podcast_transcript)[:max_tokens])

  completion = openai.ChatCompletion.create(
      model="gpt-3.5-turbo",
      messages=[{"role": "user", "content": "Here is a podcast transcript ####" + podcast_transcript}],
      functions=[
      {
          "name": "get_podcast_guest_information",
          "description": "Get information on the podcast guest using their full name and the name of the organization they are part of to search for them on Wikipedia or Google",
          "parameters": {
              "type": "object",
              "properties": {
                  "guest_name": {
                      "type": "string",
                      "description": "The full name of the guest who is speaking in the podcast",
                  },
                  "guest_organization": {
                      "type": "string",
                      "description": "The full name of the organization that the podcast guest belongs to or runs",
                  },
                  "guest_title": {
                      "type": "string",
                      "description": "The title, designation or role of the podcast guest in their organization",
                  },
              },
              "required": ["guest_name"],
          },
      }
  ],
  function_call={"name": "get_podcast_guest_information"}
  )
  podcast_guest = ""
  podcast_guest_org = ""
  podcast_guest_title = ""
  response_message = completion["choices"][0]["message"]
  if response_message.get("function_call"):
    function_name = response_message["function_call"]["name"]
    function_args = json.loads(response_message["function_call"]["arguments"])
    podcast_guest=function_args.get("guest_name")
    podcast_guest_org=function_args.get("guest_organization")
    podcast_guest_title=function_args.get("guest_title")
  if podcast_guest_org is None:
    podcast_guest_org = ""
  if podcast_guest_title is None:
    podcast_guest_title = ""
  try:
    input = wikipedia.page(podcast_guest + " " + podcast_guest_org + " " + podcast_guest_title, auto_suggest=True)
  except:
    input = None
    print('No info found.')
  podcastGuest = {"Guest": podcast_guest}
  if podcast_guest_title:
    podcastGuest["Title"] = podcast_guest_title
  if podcast_guest_org:
    podcastGuest["Organization"] = podcast_guest_org
  if input:
    podcastGuest["Wiki Summary"] = input.summary
  return podcastGuest

def get_podcast_highlights(podcast_transcript):
  import openai
  import tiktoken
  instructPrompt = """
  Below the #### is a podcast transcript. Extract 5 to 10 different lessons from the transcript.
  Each lesson should include a sentence explaining the lesson, two sentences explaining evidence and context for the lesson, and the name of the speaker of the lesson.
  Each lesson should be bulleted and have the format:
  <number>. Lesson: <lesson>
  Evidence: <evidence>
  Speaker name: <speaker name>
  ####
  """

  openai.api_key = "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"

  enc = tiktoken.encoding_for_model("gpt-3.5-turbo")
  n_tokens_podcast = len(enc.encode(podcast_transcript))
  n_tokens_prompt = len(enc.encode(instructPrompt))
  max_tokens = 4096
  if n_tokens_podcast + n_tokens_prompt > max_tokens:
    podcast_transcript = enc.decode(enc.encode(podcast_transcript)[:max_tokens - n_tokens_prompt])

  request = instructPrompt + podcast_transcript
  chatOutput = openai.ChatCompletion.create(model="gpt-3.5-turbo-16k",
                                              messages=[{"role": "system", "content": "You are a helpful assistant."},
                                                        {"role": "user", "content": request}
                                                        ]
                                              )
  podcastHighlights = chatOutput.choices[0].message.content
  return podcastHighlights

def process_podcast(url, path, index=0):
  output = {}
  podcast_details = podcast_transcript
  podcast_summary = get_podcast_summary.call(podcast_details['episode_transcript'])
  podcast_guest = get_podcast_guest.call(podcast_details['episode_transcript'])
  podcast_highlights = get_podcast_highlights.call(podcast_details['episode_transcript'])
  output['podcast_details'] = podcast_details
  output['podcast_summary'] = podcast_summary
  output['podcast_guest'] = podcast_guest
  output['podcast_highlights'] = podcast_highlights
  return output

def test_method(url, path, index=0):
  output = {}
  podcast_details = {"episode_transcript": podcast_transcript}
  print ("Podcast Summary: ", get_podcast_summary(podcast_details['episode_transcript']))
#   print ("Podcast Guest Information: ", get_podcast_guest(podcast_details['episode_transcript']))
#   print ("Podcast Highlights: ", get_podcast_highlights(podcast_details['episode_transcript']))

output = test_method("", "")